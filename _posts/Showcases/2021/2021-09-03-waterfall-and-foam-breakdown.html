---
title: Waterfall and foam (breakdown)
layout: post
category: showcase
preview-video: assets/posts/2021/waterfall-and-foam-breakdown/preview.mp4
image: /assets/posts/2021/waterfall-and-foam-breakdown/preview_still.jpg
---

<div class="container video__container youtube round margin--vertical">
    <iframe class="video__youtube" src="https://www.youtube.com/embed/Toi7A_EKC9I?autoplay=0&rel=0" title="YouTube video player" frameborder="0" autoplay="false" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<div class="grid__showcase-elements grid__align--bottom">
    <div class="container__list round">
        <h3>Components</h3>
        <ul>
            <li>Watefall shader</li>
            <li>Foam shader</li>
            <li>Particle shader
                <ul>
                    <li>GPU instancing</li>
                    <li>Custom lighting</li>
                    <li>Shadow casting</li>
                    <li>Custom vertex streams</li>
                </ul>
            </li>
            <li>Water (<a href="{{ site.baseurl }}/2021/08/26/a-watery-respite-breakdown">previous showcase</a>)</li>
        </ul>
    </div>
    <div class="container__list round">
        <h3>Tools</h3>
        <ul>
            <li><i class="fas fa-cube"></i> <em>Blender</em> (modelling & UV mapping)</li>
            <li><i class="fas fa-chess-board"></i> <a href="https://github.com/alelievr/Mixture" target="_blank"><em>Mixture</em></a> (noise texutres)</li>
            <li><i class="fab fa-unity"></i> <em>Unity</em> URP</li>
        </ul>
    </div>
</div>

<h2>üìùDescription</h2>
<p>The video shows a breakdown of my waterfall shader and particle systems that go with my <a href="{{ site.baseurl }}/2021/08/26/a-watery-respite-breakdown">water shader</a>. It was made with <em>Unity</em> using URP and HLSL shaders. The waterfall consists of 4 models and 3 different particle systems. The models consists of the following:</p>

<ul>
    <li>The "water" in the waterfall</li>
    <li>Three foam models
        <ul>
            <li>One at the top to hide the transition between water and waterfall</li>
            <li>One intersecting the waterfall</li>
            <li>And the final one that surrounds the other foam at the bottom and has more clipping to give the impression of foam breaking away</li>
        </ul>
    </li>
</ul>

<p>The particle systems are divided as follows:</p>

<ul>
    <li>One that spawns flow particles for use with the water shader</li>
    <li>One that throws small sprinkles up into the air (a simple billboard particle)</li>
    <li>And one that spawns splash meshes, which have have vertex displacement over lifetime, shading and shadow casting.</li>
</ul>

<p>That last particle system was more complicated to make, but in the end I got it all working with GPU instancing in URP with an HLSL shader.</p>



<h2>üìòAcknowledgements</h2>
<p>The approach and general look of the waterfall and all the foam is inspired by <a href="https://youtu.be/fwKQyDZ4ark?t=1392" target=""_blank">this</a> talk by <a href="https://simonschreibt.de/" target="_blank"><em>Simon Tr√ºmpler</em></a> (aka <em>Simon schreibt</em>), where he talks about VFX in the game <em>Rime</em> including a waterfall.</p>

<p>The water from the waterfall borrows a lot from my <a href="{{ site.baseurl }}/2021/08/26/a-watery-respite-breakdown">water shader</a>, so check that out for more info and acknowledgements on that.</p>
